{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/servicesAziz/services\";\nimport * as i2 from \"@angular/router\";\nfunction FactureStatComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵelement(1, \"div\", 6);\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Chargement des statistiques...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction FactureStatComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function FactureStatComponent_div_6_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.loadStatistics());\n    });\n    i0.ɵɵtext(4, \"R\\u00E9essayer\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.error);\n  }\n}\nfunction FactureStatComponent_div_7_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" factures \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const key_r6 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", key_r6, \": \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r5.statsData[key_r6]);\n  }\n}\nfunction FactureStatComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 9);\n    i0.ɵɵelement(2, \"canvas\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 11)(4, \"h3\");\n    i0.ɵɵtext(5, \"R\\u00E9sum\\u00E9\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"ul\");\n    i0.ɵɵtemplate(7, FactureStatComponent_div_7_li_7_Template, 5, 2, \"li\", 12);\n    i0.ɵɵelementStart(8, \"li\", 13);\n    i0.ɵɵtext(9, \"Total: \");\n    i0.ɵɵelementStart(10, \"strong\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \" factures\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"data\", ctx_r2.barChartData)(\"options\", ctx_r2.barChartOptions)(\"type\", ctx_r2.barChartType);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.objectKeys(ctx_r2.statsData));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.getTotalFactures());\n  }\n}\nexport class FactureStatComponent {\n  constructor(restService, router) {\n    this.restService = restService;\n    this.router = router;\n    this.loading = false;\n    this.error = null;\n    this.statsData = {};\n    this.objectKeys = Object.keys;\n    // Chart.js configuration\n    this.barChartOptions = {\n      responsive: true,\n      scales: {\n        x: {\n          title: {\n            display: true,\n            text: 'État de facture'\n          }\n        },\n        y: {\n          title: {\n            display: true,\n            text: 'Nombre de factures'\n          },\n          beginAtZero: true,\n          ticks: {\n            precision: 0\n          }\n        }\n      },\n      plugins: {\n        legend: {\n          display: false\n        },\n        tooltip: {\n          callbacks: {\n            label: context => `${context.parsed.y} factures`\n          }\n        }\n      }\n    };\n    this.barChartType = 'bar';\n    this.barChartData = {\n      labels: [],\n      datasets: [{\n        data: [],\n        backgroundColor: []\n      }]\n    };\n  }\n  ngOnInit() {\n    this.loadStatistics();\n  }\n  loadStatistics() {\n    this.loading = true;\n    this.error = null;\n    this.restService.getStatistiquesParEtat().subscribe({\n      next: data => {\n        this.statsData = data;\n        this.updateChartData();\n        this.loading = false;\n      },\n      error: err => {\n        this.error = 'Erreur lors du chargement des statistiques';\n        console.error(err);\n        this.loading = false;\n      }\n    });\n  }\n  updateChartData() {\n    const labels = Object.keys(this.statsData);\n    const values = Object.values(this.statsData);\n    const backgroundColors = this.generateColors(labels);\n    this.barChartData = {\n      labels: labels,\n      datasets: [{\n        data: values,\n        backgroundColor: backgroundColors,\n        hoverBackgroundColor: backgroundColors.map((c, i) => this.darkenColor(c, labels[i])),\n        borderColor: '#ffffff',\n        borderWidth: 1\n      }]\n    };\n  }\n  generateColors(labels) {\n    return labels.map(label => {\n      switch (label.toUpperCase()) {\n        case 'RETARD':\n          return 'hsl(0, 70%, 60%)';\n        // Rouge\n        case 'ATTENTE':\n          return 'hsl(60, 70%, 60%)';\n        // Jaune\n        case 'PAYE':\n          return 'hsl(120, 70%, 60%)';\n        // Vert\n        default:\n          return 'hsl(200, 70%, 60%)';\n        // Couleur par défaut (bleu)\n      }\n    });\n  }\n\n  darkenColor(color, label) {\n    const percent = label.toUpperCase() === 'PAYE' ? 15 : 20; // On assombrit moins le vert pour garder sa lisibilité\n    return color.replace(/hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/, (_, h, s, l) => `hsl(${h}, ${s}%, ${Math.max(0, parseFloat(l) - percent)}%)`);\n  }\n  getTotalFactures() {\n    return Object.values(this.statsData).reduce((sum, count) => sum + count, 0);\n  }\n  navigateToFactureList() {\n    this.router.navigate(['/facture']);\n  }\n  static {\n    this.ɵfac = function FactureStatComponent_Factory(t) {\n      return new (t || FactureStatComponent)(i0.ɵɵdirectiveInject(i1.RestService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: FactureStatComponent,\n      selectors: [[\"app-facture-stat\"]],\n      decls: 8,\n      vars: 3,\n      consts: [[1, \"stats-container\"], [1, \"facturelist\", 3, \"click\"], [\"class\", \"loading-spinner\", 4, \"ngIf\"], [\"class\", \"error-message\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"loading-spinner\"], [1, \"spinner\"], [1, \"error-message\"], [3, \"click\"], [1, \"chart-container\"], [\"baseChart\", \"\", 3, \"data\", \"options\", \"type\"], [1, \"stats-summary\"], [4, \"ngFor\", \"ngForOf\"], [1, \"total\"]],\n      template: function FactureStatComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n          i0.ɵɵtext(2, \"Statistiques des factures par \\u00E9tat\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"button\", 1);\n          i0.ɵɵlistener(\"click\", function FactureStatComponent_Template_button_click_3_listener() {\n            return ctx.navigateToFactureList();\n          });\n          i0.ɵɵtext(4, \"Liste des factures\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(5, FactureStatComponent_div_5_Template, 4, 0, \"div\", 2);\n          i0.ɵɵtemplate(6, FactureStatComponent_div_6_Template, 5, 1, \"div\", 3);\n          i0.ɵɵtemplate(7, FactureStatComponent_div_7_Template, 13, 5, \"div\", 4);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.error);\n        }\n      },\n      styles: [\".stats-container[_ngcontent-%COMP%] {\\n    max-width: 900px;\\n    margin: 2rem auto;\\n    padding: 1rem;\\n    background: white;\\n    border-radius: 8px;\\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\\n  }\\n  \\n  h2[_ngcontent-%COMP%] {\\n    color: #333;\\n    text-align: center;\\n    margin-bottom: 2rem;\\n  }\\n  \\n  .chart-container[_ngcontent-%COMP%] {\\n    position: relative;\\n    height: 400px;\\n    margin-bottom: 2rem;\\n  }\\n  \\n  .stats-summary[_ngcontent-%COMP%] {\\n    background: #f8f9fa;\\n    padding: 1.5rem;\\n    border-radius: 8px;\\n  }\\n  \\n  .stats-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n    margin-top: 0;\\n    color: #444;\\n  }\\n  \\n  .stats-summary[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\\n    list-style: none;\\n    padding: 0;\\n  }\\n  \\n  .stats-summary[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\n    padding: 0.5rem 0;\\n    border-bottom: 1px solid #eee;\\n    display: flex;\\n    justify-content: space-between;\\n  }\\n  \\n  .stats-summary[_ngcontent-%COMP%]   li.total[_ngcontent-%COMP%] {\\n    font-weight: bold;\\n    border-top: 2px solid #333;\\n    border-bottom: none;\\n    padding-top: 1rem;\\n    margin-top: 0.5rem;\\n  }\\n  \\n  .loading-spinner[_ngcontent-%COMP%] {\\n    text-align: center;\\n    padding: 2rem;\\n  }\\n  \\n  .error-message[_ngcontent-%COMP%] {\\n    color: #dc3545;\\n    text-align: center;\\n    padding: 2rem;\\n  }\\n  \\n  .error-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n    margin-top: 1rem;\\n    padding: 0.5rem 1rem;\\n    background: #dc3545;\\n    color: white;\\n    border: none;\\n    border-radius: 4px;\\n    cursor: pointer;\\n\\n    \\n\\n    \\n\\n    \\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvYXppejEvZmFjdHVyZS1zdGF0L2ZhY3R1cmUtc3RhdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksZ0JBQWdCO0lBQ2hCLGlCQUFpQjtJQUNqQixhQUFhO0lBQ2IsaUJBQWlCO0lBQ2pCLGtCQUFrQjtJQUNsQix5Q0FBeUM7RUFDM0M7O0VBRUE7SUFDRSxXQUFXO0lBQ1gsa0JBQWtCO0lBQ2xCLG1CQUFtQjtFQUNyQjs7RUFFQTtJQUNFLGtCQUFrQjtJQUNsQixhQUFhO0lBQ2IsbUJBQW1CO0VBQ3JCOztFQUVBO0lBQ0UsbUJBQW1CO0lBQ25CLGVBQWU7SUFDZixrQkFBa0I7RUFDcEI7O0VBRUE7SUFDRSxhQUFhO0lBQ2IsV0FBVztFQUNiOztFQUVBO0lBQ0UsZ0JBQWdCO0lBQ2hCLFVBQVU7RUFDWjs7RUFFQTtJQUNFLGlCQUFpQjtJQUNqQiw2QkFBNkI7SUFDN0IsYUFBYTtJQUNiLDhCQUE4QjtFQUNoQzs7RUFFQTtJQUNFLGlCQUFpQjtJQUNqQiwwQkFBMEI7SUFDMUIsbUJBQW1CO0lBQ25CLGlCQUFpQjtJQUNqQixrQkFBa0I7RUFDcEI7O0VBRUE7SUFDRSxrQkFBa0I7SUFDbEIsYUFBYTtFQUNmOztFQUVBO0lBQ0UsY0FBYztJQUNkLGtCQUFrQjtJQUNsQixhQUFhO0VBQ2Y7O0VBRUE7SUFDRSxnQkFBZ0I7SUFDaEIsb0JBQW9CO0lBQ3BCLG1CQUFtQjtJQUNuQixZQUFZO0lBQ1osWUFBWTtJQUNaLGtCQUFrQjtJQUNsQixlQUFlOzs7Ozs7O0VBT2pCIiwic291cmNlc0NvbnRlbnQiOlsiLnN0YXRzLWNvbnRhaW5lciB7XHJcbiAgICBtYXgtd2lkdGg6IDkwMHB4O1xyXG4gICAgbWFyZ2luOiAycmVtIGF1dG87XHJcbiAgICBwYWRkaW5nOiAxcmVtO1xyXG4gICAgYmFja2dyb3VuZDogd2hpdGU7XHJcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgICBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcclxuICB9XHJcbiAgXHJcbiAgaDIge1xyXG4gICAgY29sb3I6ICMzMzM7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAycmVtO1xyXG4gIH1cclxuICBcclxuICAuY2hhcnQtY29udGFpbmVyIHtcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgIGhlaWdodDogNDAwcHg7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAycmVtO1xyXG4gIH1cclxuICBcclxuICAuc3RhdHMtc3VtbWFyeSB7XHJcbiAgICBiYWNrZ3JvdW5kOiAjZjhmOWZhO1xyXG4gICAgcGFkZGluZzogMS41cmVtO1xyXG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gIH1cclxuICBcclxuICAuc3RhdHMtc3VtbWFyeSBoMyB7XHJcbiAgICBtYXJnaW4tdG9wOiAwO1xyXG4gICAgY29sb3I6ICM0NDQ7XHJcbiAgfVxyXG4gIFxyXG4gIC5zdGF0cy1zdW1tYXJ5IHVsIHtcclxuICAgIGxpc3Qtc3R5bGU6IG5vbmU7XHJcbiAgICBwYWRkaW5nOiAwO1xyXG4gIH1cclxuICBcclxuICAuc3RhdHMtc3VtbWFyeSBsaSB7XHJcbiAgICBwYWRkaW5nOiAwLjVyZW0gMDtcclxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICB9XHJcbiAgXHJcbiAgLnN0YXRzLXN1bW1hcnkgbGkudG90YWwge1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICBib3JkZXItdG9wOiAycHggc29saWQgIzMzMztcclxuICAgIGJvcmRlci1ib3R0b206IG5vbmU7XHJcbiAgICBwYWRkaW5nLXRvcDogMXJlbTtcclxuICAgIG1hcmdpbi10b3A6IDAuNXJlbTtcclxuICB9XHJcbiAgXHJcbiAgLmxvYWRpbmctc3Bpbm5lciB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBwYWRkaW5nOiAycmVtO1xyXG4gIH1cclxuICBcclxuICAuZXJyb3ItbWVzc2FnZSB7XHJcbiAgICBjb2xvcjogI2RjMzU0NTtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIHBhZGRpbmc6IDJyZW07XHJcbiAgfVxyXG4gIFxyXG4gIC5lcnJvci1tZXNzYWdlIGJ1dHRvbiB7XHJcbiAgICBtYXJnaW4tdG9wOiAxcmVtO1xyXG4gICAgcGFkZGluZzogMC41cmVtIDFyZW07XHJcbiAgICBiYWNrZ3JvdW5kOiAjZGMzNTQ1O1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG5cclxuICAgIFxyXG5cclxuICAgIFxyXG5cclxuICAgIFxyXG4gIH0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵlistener","FactureStatComponent_div_6_Template_button_click_3_listener","ɵɵrestoreView","_r4","ctx_r3","ɵɵnextContext","ɵɵresetView","loadStatistics","ɵɵadvance","ɵɵtextInterpolate","ctx_r1","error","ɵɵtextInterpolate1","key_r6","ctx_r5","statsData","ɵɵtemplate","FactureStatComponent_div_7_li_7_Template","ɵɵproperty","ctx_r2","barChartData","barChartOptions","barChartType","objectKeys","getTotalFactures","FactureStatComponent","constructor","restService","router","loading","Object","keys","responsive","scales","x","title","display","text","y","beginAtZero","ticks","precision","plugins","legend","tooltip","callbacks","label","context","parsed","labels","datasets","data","backgroundColor","ngOnInit","getStatistiquesParEtat","subscribe","next","updateChartData","err","console","values","backgroundColors","generateColors","hoverBackgroundColor","map","c","i","darkenColor","borderColor","borderWidth","toUpperCase","color","percent","replace","_","h","s","l","Math","max","parseFloat","reduce","sum","count","navigateToFactureList","navigate","ɵɵdirectiveInject","i1","RestService","i2","Router","selectors","decls","vars","consts","template","FactureStatComponent_Template","rf","ctx","FactureStatComponent_Template_button_click_3_listener","FactureStatComponent_div_5_Template","FactureStatComponent_div_6_Template","FactureStatComponent_div_7_Template"],"sources":["C:\\Users\\moham\\Documents\\GitHub\\pi\\userappAN\\src\\app\\pages\\aziz1\\facture-stat\\facture-stat.component.ts","C:\\Users\\moham\\Documents\\GitHub\\pi\\userappAN\\src\\app\\pages\\aziz1\\facture-stat\\facture-stat.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { ChartConfiguration, ChartData, ChartType } from 'chart.js';\r\nimport { RestService } from 'src/app/servicesAziz/services';\r\n  \r\n\r\n@Component({\r\n  selector: 'app-facture-stat',\r\n  templateUrl: './facture-stat.component.html',\r\n  styleUrls: ['./facture-stat.component.css']\r\n})\r\nexport class FactureStatComponent implements OnInit {\r\n\r\n  loading: boolean = false;\r\n  error: string | null = null;\r\n  statsData: { [key: string]: number } = {};\r\n  objectKeys= Object.keys;\r\n  \r\n  // Chart.js configuration\r\n  public barChartOptions: ChartConfiguration['options'] = {\r\n    responsive: true,\r\n    scales: {\r\n      x: { title: { display: true, text: 'État de facture' } },\r\n      y: { \r\n        title: { display: true, text: 'Nombre de factures' },\r\n        beginAtZero: true,\r\n        ticks: { precision: 0 }\r\n      }\r\n    },\r\n    plugins: {\r\n      legend: { display: false },\r\n      tooltip: { callbacks: { label: (context) => `${context.parsed.y} factures` } }\r\n    }\r\n  };\r\n\r\n  public barChartType: ChartType = 'bar';\r\n  public barChartData: ChartData<'bar'> = {\r\n    labels: [],\r\n    datasets: [{ data: [], backgroundColor: [] }]\r\n  };\r\n\r\n  constructor(private restService: RestService,\r\n    private router : Router\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadStatistics();\r\n  }\r\n\r\n  loadStatistics(): void {\r\n    this.loading = true;\r\n    this.error = null;\r\n    \r\n    this.restService.getStatistiquesParEtat().subscribe({\r\n      next: (data) => {\r\n        this.statsData = data;\r\n        this.updateChartData();\r\n        this.loading = false;\r\n      },\r\n      error: (err) => {\r\n        this.error = 'Erreur lors du chargement des statistiques';\r\n        console.error(err);\r\n        this.loading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  updateChartData(): void {\r\n    const labels = Object.keys(this.statsData);\r\n    const values = Object.values(this.statsData);\r\n    const backgroundColors = this.generateColors(labels);\r\n    \r\n    this.barChartData = {\r\n      labels: labels,\r\n      datasets: [{\r\n        data: values,\r\n        backgroundColor: backgroundColors,\r\n        hoverBackgroundColor: backgroundColors.map((c, i) => this.darkenColor(c, labels[i])),\r\n        borderColor: '#ffffff',\r\n        borderWidth: 1\r\n      }]\r\n    };\r\n  }\r\n\r\n  private generateColors(labels: string[]): string[] {\r\n    return labels.map(label => {\r\n      switch(label.toUpperCase()) {\r\n        case 'RETARD':\r\n          return 'hsl(0, 70%, 60%)'; // Rouge\r\n        case 'ATTENTE':\r\n          return 'hsl(60, 70%, 60%)'; // Jaune\r\n        case 'PAYE':\r\n          return 'hsl(120, 70%, 60%)'; // Vert\r\n        default:\r\n          return 'hsl(200, 70%, 60%)'; // Couleur par défaut (bleu)\r\n      }\r\n    });\r\n  }\r\n\r\n  private darkenColor(color: string, label: string): string {\r\n    const percent = label.toUpperCase() === 'PAYE' ? 15 : 20; // On assombrit moins le vert pour garder sa lisibilité\r\n    return color.replace(/hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/, \r\n      (_, h, s, l) => `hsl(${h}, ${s}%, ${Math.max(0, parseFloat(l) - percent)}%)`);\r\n  }\r\n\r\n  getTotalFactures(): number {\r\n    return Object.values(this.statsData).reduce((sum, count) => sum + count, 0);\r\n  }\r\n\r\n  navigateToFactureList() {\r\n    this.router.navigate(['/facture']);\r\n  }\r\n}","<div class=\"stats-container\">\r\n    <h2>Statistiques des factures par état</h2>\r\n    <button (click)=\"navigateToFactureList()\"class=\"facturelist\">Liste des factures</button>\r\n\r\n    \r\n    <div *ngIf=\"loading\" class=\"loading-spinner\">\r\n      <div class=\"spinner\"></div>\r\n      <p>Chargement des statistiques...</p>\r\n    </div>\r\n  \r\n    <div *ngIf=\"error\" class=\"error-message\">\r\n      <p>{{ error }}</p>\r\n      <button (click)=\"loadStatistics()\">Réessayer</button>\r\n    </div>\r\n  \r\n    <div *ngIf=\"!loading && !error\">\r\n      <div class=\"chart-container\">\r\n        <canvas baseChart\r\n          [data]=\"barChartData\"\r\n          [options]=\"barChartOptions\"\r\n          [type]=\"barChartType\">\r\n        </canvas>\r\n      </div>\r\n  \r\n      <div class=\"stats-summary\">\r\n  <h3>Résumé</h3>\r\n  <ul>\r\n    <li *ngFor=\"let key of objectKeys(statsData)\">\r\n      {{ key }}: <strong>{{ statsData[key] }}</strong> factures\r\n    </li>\r\n    <li class=\"total\">Total: <strong>{{ getTotalFactures() }}</strong> factures</li>\r\n  </ul>\r\n</div>\r\n\r\n  </div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}