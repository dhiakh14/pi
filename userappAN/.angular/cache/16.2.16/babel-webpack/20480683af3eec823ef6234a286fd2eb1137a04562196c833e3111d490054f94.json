{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/servicesAziz/services\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/servicesAziz/serviceML\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction FactureFormComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function FactureFormComponent_div_13_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.factureForm.patchValue({\n        dateecheance: ctx_r1.suggestedDateEcheance\n      }));\n    });\n    i0.ɵɵtext(3, \"Utiliser\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \\uD83D\\uDCA1 Suggestion : \", ctx_r0.suggestedDateEcheance, \" \");\n  }\n}\nexport class FactureFormComponent {\n  constructor(restService, router, serviceML) {\n    this.restService = restService;\n    this.router = router;\n    this.serviceML = serviceML;\n    this.suggestedDateEcheance = '';\n    this.factureForm = new FormGroup({\n      dateecheance: new FormControl('', [Validators.required]),\n      dateemission: new FormControl('', [Validators.required]),\n      etatFacture: new FormControl('ATTENTE', [Validators.required]),\n      montant: new FormControl('', [Validators.required, Validators.min(1)]),\n      number: new FormControl('')\n    });\n    this.factureForm.get('dateemission')?.valueChanges.subscribe(date => {\n      this.tryPredictEcheance();\n    });\n    this.factureForm.get('montant')?.valueChanges.subscribe(montant => {\n      this.tryPredictEcheance();\n    });\n  }\n  onSubmit() {\n    if (this.factureForm.valid) {\n      const factureData = this.factureForm.value;\n      factureData.dateecheance = factureData.dateecheance.split('T')[0];\n      factureData.dateemission = factureData.dateemission.split('T')[0];\n      this.restService.ajouterFacture({\n        body: factureData\n      }).subscribe(response => {\n        console.log('Facture added successfully:', response);\n        this.router.navigate(['/facture']);\n      }, error => {\n        console.error('Error adding facture:', error);\n      });\n    } else {\n      console.log('Form is invalid');\n    }\n  }\n  tryPredictEcheance() {\n    const dateEmission = this.factureForm.get('dateemission')?.value;\n    const montant = this.factureForm.get('montant')?.value;\n    if (dateEmission && montant > 0) {\n      this.serviceML.predictDateEcheance(montant, dateEmission).subscribe({\n        next: predictedDate => {\n          const dateRegex = /\\d{4}-\\d{2}-\\d{2}/;\n          const match = predictedDate.match(dateRegex);\n          if (match) {\n            this.suggestedDateEcheance = match[0];\n          } else {\n            this.suggestedDateEcheance = '';\n          }\n        },\n        error: err => {\n          console.error('Erreur lors de la prédiction :', err);\n          this.suggestedDateEcheance = '';\n        }\n      });\n    } else {\n      this.suggestedDateEcheance = '';\n    }\n  }\n  static {\n    this.ɵfac = function FactureFormComponent_Factory(t) {\n      return new (t || FactureFormComponent)(i0.ɵɵdirectiveInject(i1.RestService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ServiceML));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: FactureFormComponent,\n      selectors: [[\"app-facture-form\"]],\n      decls: 30,\n      vars: 3,\n      consts: [[3, \"formGroup\", \"ngSubmit\"], [\"for\", \"dateemission\"], [\"id\", \"dateemission\", \"formControlName\", \"dateemission\", \"type\", \"date\"], [\"for\", \"montant\"], [\"id\", \"montant\", \"formControlName\", \"montant\", \"type\", \"number\"], [\"for\", \"dateecheance\"], [\"id\", \"dateecheance\", \"formControlName\", \"dateecheance\", \"type\", \"date\"], [\"style\", \"margin-top: 5px; color: #666;\", 4, \"ngIf\"], [\"for\", \"etatFacture\"], [\"id\", \"etatFacture\", \"formControlName\", \"etatFacture\"], [\"value\", \"PAYE\"], [\"value\", \"ATTENTE\"], [\"value\", \"RETARD\"], [\"for\", \"number\"], [\"id\", \"number\", \"formControlName\", \"number\", \"type\", \"number\"], [\"type\", \"submit\", 3, \"disabled\"], [2, \"margin-top\", \"5px\", \"color\", \"#666\"], [\"type\", \"button\", 3, \"click\"]],\n      template: function FactureFormComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"form\", 0);\n          i0.ɵɵlistener(\"ngSubmit\", function FactureFormComponent_Template_form_ngSubmit_0_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(1, \"div\")(2, \"label\", 1);\n          i0.ɵɵtext(3, \"Date d'\\u00C9mission\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(4, \"input\", 2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"div\")(6, \"label\", 3);\n          i0.ɵɵtext(7, \"Montant\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(8, \"input\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"div\")(10, \"label\", 5);\n          i0.ɵɵtext(11, \"Date d'\\u00C9ch\\u00E9ance\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(12, \"input\", 6);\n          i0.ɵɵtemplate(13, FactureFormComponent_div_13_Template, 4, 1, \"div\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"div\")(15, \"label\", 8);\n          i0.ɵɵtext(16, \"\\u00C9tat de la Facture\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"select\", 9)(18, \"option\", 10);\n          i0.ɵɵtext(19, \"PAYE\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"option\", 11);\n          i0.ɵɵtext(21, \"ATTENTE\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(22, \"option\", 12);\n          i0.ɵɵtext(23, \"RETARD\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(24, \"div\")(25, \"label\", 13);\n          i0.ɵɵtext(26, \"Num\\u00E9ro\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(27, \"input\", 14);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(28, \"button\", 15);\n          i0.ɵɵtext(29, \"Add Facture\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"formGroup\", ctx.factureForm);\n          i0.ɵɵadvance(13);\n          i0.ɵɵproperty(\"ngIf\", ctx.suggestedDateEcheance);\n          i0.ɵɵadvance(15);\n          i0.ɵɵproperty(\"disabled\", ctx.factureForm.invalid);\n        }\n      },\n      dependencies: [i4.NgIf, i5.ɵNgNoValidate, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i5.DefaultValueAccessor, i5.NumberValueAccessor, i5.SelectControlValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.FormControlName],\n      styles: [\"\\n\\nform[_ngcontent-%COMP%] {\\n    max-width: 500px;\\n    margin: 0 auto;\\n    padding: 25px;\\n    border: 1px solid #e0e0e0;\\n    border-radius: 12px;\\n    background-color: #ffffff;\\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\\n  }\\n  \\n  \\n\\n  form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\\n    margin-bottom: 20px;\\n    position: relative;\\n  }\\n  \\n  \\n\\n  label[_ngcontent-%COMP%] {\\n    display: block;\\n    margin-bottom: 8px;\\n    font-weight: 600;\\n    color: #333;\\n    font-size: 14px;\\n  }\\n  \\n  \\n\\n  input[type=\\\"date\\\"][_ngcontent-%COMP%], input[type=\\\"number\\\"][_ngcontent-%COMP%], select[_ngcontent-%COMP%] {\\n    width: 100%;\\n    padding: 10px;\\n    border: 2px solid #e0e0e0;\\n    border-radius: 6px;\\n    font-size: 14px;\\n    box-sizing: border-box;\\n    transition: border-color 0.3s ease, box-shadow 0.3s ease;\\n    background-color: #fafafa;\\n  }\\n  \\n  \\n\\n  input[_ngcontent-%COMP%]::placeholder {\\n    color: #999;\\n  }\\n  \\n  \\n\\n  button[type=\\\"submit\\\"][_ngcontent-%COMP%] {\\n    width: 100%;\\n    padding: 12px;\\n    background-color: #007bff;\\n    color: white;\\n    border: none;\\n    border-radius: 6px;\\n    font-size: 16px;\\n    font-weight: 600;\\n    cursor: pointer;\\n    transition: background-color 0.3s ease, transform 0.2s ease;\\n  }\\n  \\n  \\n\\n  button[type=\\\"submit\\\"][_ngcontent-%COMP%]:disabled {\\n    background-color: #cccccc;\\n    cursor: not-allowed;\\n    opacity: 0.7;\\n  }\\n  \\n  \\n\\n  button[type=\\\"submit\\\"][_ngcontent-%COMP%]:not(:disabled):hover {\\n    background-color: #0056b3;\\n    transform: translateY(-2px);\\n  }\\n  \\n  \\n\\n  button[type=\\\"submit\\\"][_ngcontent-%COMP%]:not(:disabled):active {\\n    transform: translateY(0);\\n  }\\n  \\n  \\n\\n  input[type=\\\"date\\\"][_ngcontent-%COMP%]:focus, input[type=\\\"number\\\"][_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus {\\n    border-color: #007bff;\\n    outline: none;\\n    box-shadow: 0 0 8px rgba(0, 123, 255, 0.3);\\n    background-color: #fff;\\n  }\\n  \\n  \\n\\n  select[_ngcontent-%COMP%] {\\n    appearance: none;\\n    background-image: url(\\\"data:image/svg+xml;charset=UTF-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23333'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E\\\");\\n    background-repeat: no-repeat;\\n    background-position: right 10px center;\\n    background-size: 12px;\\n  }\\n  \\n  \\n\\n  input.ng-invalid.ng-touched[_ngcontent-%COMP%], select.ng-invalid.ng-touched[_ngcontent-%COMP%] {\\n    border-color: #ff4444;\\n  }\\n  \\n  input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus, select.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus {\\n    box-shadow: 0 0 8px rgba(255, 68, 68, 0.3);\\n  }\\n  \\n  \\n\\n  .error-message[_ngcontent-%COMP%] {\\n    color: #ff4444;\\n    font-size: 12px;\\n    margin-top: 4px;\\n    display: none;\\n  }\\n  \\n  input.ng-invalid.ng-touched[_ngcontent-%COMP%]    + .error-message[_ngcontent-%COMP%], select.ng-invalid.ng-touched[_ngcontent-%COMP%]    + .error-message[_ngcontent-%COMP%] {\\n    display: block;\\n  }\\n  \\n  \\n\\n  @media (max-width: 600px) {\\n    form[_ngcontent-%COMP%] {\\n      padding: 15px;\\n    }\\n  \\n    input[type=\\\"date\\\"][_ngcontent-%COMP%], input[type=\\\"number\\\"][_ngcontent-%COMP%], select[_ngcontent-%COMP%] {\\n      padding: 8px;\\n    }\\n  \\n    button[type=\\\"submit\\\"][_ngcontent-%COMP%] {\\n      padding: 10px;\\n    }\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvYXppejEvZmFjdHVyZS1mb3JtL2ZhY3R1cmUtZm9ybS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHlCQUF5QjtBQUN6QjtJQUNJLGdCQUFnQjtJQUNoQixjQUFjO0lBQ2QsYUFBYTtJQUNiLHlCQUF5QjtJQUN6QixtQkFBbUI7SUFDbkIseUJBQXlCO0lBQ3pCLHlDQUF5QztJQUN6Qyw0REFBNEQ7RUFDOUQ7O0VBRUEsMkNBQTJDO0VBQzNDO0lBQ0UsbUJBQW1CO0lBQ25CLGtCQUFrQjtFQUNwQjs7RUFFQSxrQkFBa0I7RUFDbEI7SUFDRSxjQUFjO0lBQ2Qsa0JBQWtCO0lBQ2xCLGdCQUFnQjtJQUNoQixXQUFXO0lBQ1gsZUFBZTtFQUNqQjs7RUFFQSxtQ0FBbUM7RUFDbkM7OztJQUdFLFdBQVc7SUFDWCxhQUFhO0lBQ2IseUJBQXlCO0lBQ3pCLGtCQUFrQjtJQUNsQixlQUFlO0lBQ2Ysc0JBQXNCO0lBQ3RCLHdEQUF3RDtJQUN4RCx5QkFBeUI7RUFDM0I7O0VBRUEsd0JBQXdCO0VBQ3hCO0lBQ0UsV0FBVztFQUNiOztFQUVBLG1CQUFtQjtFQUNuQjtJQUNFLFdBQVc7SUFDWCxhQUFhO0lBQ2IseUJBQXlCO0lBQ3pCLFlBQVk7SUFDWixZQUFZO0lBQ1osa0JBQWtCO0lBQ2xCLGVBQWU7SUFDZixnQkFBZ0I7SUFDaEIsZUFBZTtJQUNmLDJEQUEyRDtFQUM3RDs7RUFFQSw0QkFBNEI7RUFDNUI7SUFDRSx5QkFBeUI7SUFDekIsbUJBQW1CO0lBQ25CLFlBQVk7RUFDZDs7RUFFQSw0QkFBNEI7RUFDNUI7SUFDRSx5QkFBeUI7SUFDekIsMkJBQTJCO0VBQzdCOztFQUVBLDZCQUE2QjtFQUM3QjtJQUNFLHdCQUF3QjtFQUMxQjs7RUFFQSxzQ0FBc0M7RUFDdEM7OztJQUdFLHFCQUFxQjtJQUNyQixhQUFhO0lBQ2IsMENBQTBDO0lBQzFDLHNCQUFzQjtFQUN4Qjs7RUFFQSxxQ0FBcUM7RUFDckM7SUFDRSxnQkFBZ0I7SUFDaEIsZ0xBQWdMO0lBQ2hMLDRCQUE0QjtJQUM1QixzQ0FBc0M7SUFDdEMscUJBQXFCO0VBQ3ZCOztFQUVBLG1DQUFtQztFQUNuQzs7SUFFRSxxQkFBcUI7RUFDdkI7O0VBRUE7O0lBRUUsMENBQTBDO0VBQzVDOztFQUVBLDBCQUEwQjtFQUMxQjtJQUNFLGNBQWM7SUFDZCxlQUFlO0lBQ2YsZUFBZTtJQUNmLGFBQWE7RUFDZjs7RUFFQTs7SUFFRSxjQUFjO0VBQ2hCOztFQUVBLHNCQUFzQjtFQUN0QjtJQUNFO01BQ0UsYUFBYTtJQUNmOztJQUVBOzs7TUFHRSxZQUFZO0lBQ2Q7O0lBRUE7TUFDRSxhQUFhO0lBQ2Y7RUFDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qIEdlbmVyYWwgZm9ybSBzdHlsaW5nICovXHJcbmZvcm0ge1xyXG4gICAgbWF4LXdpZHRoOiA1MDBweDtcclxuICAgIG1hcmdpbjogMCBhdXRvO1xyXG4gICAgcGFkZGluZzogMjVweDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNlMGUwZTA7XHJcbiAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtcclxuICAgIGJveC1zaGFkb3c6IDAgNHB4IDEycHggcmdiYSgwLCAwLCAwLCAwLjEpO1xyXG4gICAgZm9udC1mYW1pbHk6ICdTZWdvZSBVSScsIFRhaG9tYSwgR2VuZXZhLCBWZXJkYW5hLCBzYW5zLXNlcmlmO1xyXG4gIH1cclxuICBcclxuICAvKiBTdHlsZSBmb3IgZm9ybSBkaXZzIChlYWNoIGlucHV0IGdyb3VwKSAqL1xyXG4gIGZvcm0gZGl2IHtcclxuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgfVxyXG4gIFxyXG4gIC8qIExhYmVsIHN0eWxpbmcgKi9cclxuICBsYWJlbCB7XHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxuICAgIG1hcmdpbi1ib3R0b206IDhweDtcclxuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgICBjb2xvcjogIzMzMztcclxuICAgIGZvbnQtc2l6ZTogMTRweDtcclxuICB9XHJcbiAgXHJcbiAgLyogSW5wdXQgYW5kIHNlbGVjdCBmaWVsZCBzdHlsaW5nICovXHJcbiAgaW5wdXRbdHlwZT1cImRhdGVcIl0sXHJcbiAgaW5wdXRbdHlwZT1cIm51bWJlclwiXSxcclxuICBzZWxlY3Qge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgYm9yZGVyOiAycHggc29saWQgI2UwZTBlMDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDZweDtcclxuICAgIGZvbnQtc2l6ZTogMTRweDtcclxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgICB0cmFuc2l0aW9uOiBib3JkZXItY29sb3IgMC4zcyBlYXNlLCBib3gtc2hhZG93IDAuM3MgZWFzZTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmYWZhZmE7XHJcbiAgfVxyXG4gIFxyXG4gIC8qIFBsYWNlaG9sZGVyIHN0eWxpbmcgKi9cclxuICBpbnB1dDo6cGxhY2Vob2xkZXIge1xyXG4gICAgY29sb3I6ICM5OTk7XHJcbiAgfVxyXG4gIFxyXG4gIC8qIEJ1dHRvbiBzdHlsaW5nICovXHJcbiAgYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0ge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBwYWRkaW5nOiAxMnB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzAwN2JmZjtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDZweDtcclxuICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3MgZWFzZSwgdHJhbnNmb3JtIDAuMnMgZWFzZTtcclxuICB9XHJcbiAgXHJcbiAgLyogRGlzYWJsZWQgYnV0dG9uIHN0eWxpbmcgKi9cclxuICBidXR0b25bdHlwZT1cInN1Ym1pdFwiXTpkaXNhYmxlZCB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2NjY2NjO1xyXG4gICAgY3Vyc29yOiBub3QtYWxsb3dlZDtcclxuICAgIG9wYWNpdHk6IDAuNztcclxuICB9XHJcbiAgXHJcbiAgLyogSG92ZXIgZWZmZWN0IGZvciBidXR0b24gKi9cclxuICBidXR0b25bdHlwZT1cInN1Ym1pdFwiXTpub3QoOmRpc2FibGVkKTpob3ZlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA1NmIzO1xyXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpO1xyXG4gIH1cclxuICBcclxuICAvKiBBY3RpdmUgZWZmZWN0IGZvciBidXR0b24gKi9cclxuICBidXR0b25bdHlwZT1cInN1Ym1pdFwiXTpub3QoOmRpc2FibGVkKTphY3RpdmUge1xyXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xyXG4gIH1cclxuICBcclxuICAvKiBGb2N1cyBzdGF0ZSBmb3IgaW5wdXRzIGFuZCBzZWxlY3QgKi9cclxuICBpbnB1dFt0eXBlPVwiZGF0ZVwiXTpmb2N1cyxcclxuICBpbnB1dFt0eXBlPVwibnVtYmVyXCJdOmZvY3VzLFxyXG4gIHNlbGVjdDpmb2N1cyB7XHJcbiAgICBib3JkZXItY29sb3I6ICMwMDdiZmY7XHJcbiAgICBvdXRsaW5lOiBub25lO1xyXG4gICAgYm94LXNoYWRvdzogMCAwIDhweCByZ2JhKDAsIDEyMywgMjU1LCAwLjMpO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcclxuICB9XHJcbiAgXHJcbiAgLyogQ3VzdG9tIGRyb3Bkb3duIGFycm93IGZvciBzZWxlY3QgKi9cclxuICBzZWxlY3Qge1xyXG4gICAgYXBwZWFyYW5jZTogbm9uZTtcclxuICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PVVURi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAyNCAyNCcgZmlsbD0nJTIzMzMzJyUzRSUzQ3BhdGggZD0nTTcgMTBsNSA1IDUtNXonLyUzRSUzQy9zdmclM0VcIik7XHJcbiAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xyXG4gICAgYmFja2dyb3VuZC1wb3NpdGlvbjogcmlnaHQgMTBweCBjZW50ZXI7XHJcbiAgICBiYWNrZ3JvdW5kLXNpemU6IDEycHg7XHJcbiAgfVxyXG4gIFxyXG4gIC8qIEVycm9yIHN0YXRlIGZvciBpbnZhbGlkIGlucHV0cyAqL1xyXG4gIGlucHV0Lm5nLWludmFsaWQubmctdG91Y2hlZCxcclxuICBzZWxlY3QubmctaW52YWxpZC5uZy10b3VjaGVkIHtcclxuICAgIGJvcmRlci1jb2xvcjogI2ZmNDQ0NDtcclxuICB9XHJcbiAgXHJcbiAgaW5wdXQubmctaW52YWxpZC5uZy10b3VjaGVkOmZvY3VzLFxyXG4gIHNlbGVjdC5uZy1pbnZhbGlkLm5nLXRvdWNoZWQ6Zm9jdXMge1xyXG4gICAgYm94LXNoYWRvdzogMCAwIDhweCByZ2JhKDI1NSwgNjgsIDY4LCAwLjMpO1xyXG4gIH1cclxuICBcclxuICAvKiBFcnJvciBtZXNzYWdlIHN0eWxpbmcgKi9cclxuICAuZXJyb3ItbWVzc2FnZSB7XHJcbiAgICBjb2xvcjogI2ZmNDQ0NDtcclxuICAgIGZvbnQtc2l6ZTogMTJweDtcclxuICAgIG1hcmdpbi10b3A6IDRweDtcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgfVxyXG4gIFxyXG4gIGlucHV0Lm5nLWludmFsaWQubmctdG91Y2hlZCArIC5lcnJvci1tZXNzYWdlLFxyXG4gIHNlbGVjdC5uZy1pbnZhbGlkLm5nLXRvdWNoZWQgKyAuZXJyb3ItbWVzc2FnZSB7XHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxuICB9XHJcbiAgXHJcbiAgLyogUmVzcG9uc2l2ZSBkZXNpZ24gKi9cclxuICBAbWVkaWEgKG1heC13aWR0aDogNjAwcHgpIHtcclxuICAgIGZvcm0ge1xyXG4gICAgICBwYWRkaW5nOiAxNXB4O1xyXG4gICAgfVxyXG4gIFxyXG4gICAgaW5wdXRbdHlwZT1cImRhdGVcIl0sXHJcbiAgICBpbnB1dFt0eXBlPVwibnVtYmVyXCJdLFxyXG4gICAgc2VsZWN0IHtcclxuICAgICAgcGFkZGluZzogOHB4O1xyXG4gICAgfVxyXG4gIFxyXG4gICAgYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0ge1xyXG4gICAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgfVxyXG4gIH0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["FormControl","FormGroup","Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵlistener","FactureFormComponent_div_13_Template_button_click_2_listener","ɵɵrestoreView","_r2","ctx_r1","ɵɵnextContext","ɵɵresetView","factureForm","patchValue","dateecheance","suggestedDateEcheance","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","FactureFormComponent","constructor","restService","router","serviceML","required","dateemission","etatFacture","montant","min","number","get","valueChanges","subscribe","date","tryPredictEcheance","onSubmit","valid","factureData","value","split","ajouterFacture","body","response","console","log","navigate","error","dateEmission","predictDateEcheance","next","predictedDate","dateRegex","match","err","ɵɵdirectiveInject","i1","RestService","i2","Router","i3","ServiceML","selectors","decls","vars","consts","template","FactureFormComponent_Template","rf","ctx","FactureFormComponent_Template_form_ngSubmit_0_listener","ɵɵelement","ɵɵtemplate","FactureFormComponent_div_13_Template","ɵɵproperty","invalid"],"sources":["C:\\Users\\moham\\Documents\\GitHub\\pi\\userappAN\\src\\app\\pages\\aziz1\\facture-form\\facture-form.component.ts","C:\\Users\\moham\\Documents\\GitHub\\pi\\userappAN\\src\\app\\pages\\aziz1\\facture-form\\facture-form.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Facture } from 'src/app/servicesAziz/models';\r\nimport { ServiceML } from 'src/app/servicesAziz/serviceML';\r\nimport { RestService } from 'src/app/servicesAziz/services';\r\n\r\n@Component({\r\n  selector: 'app-facture-form',\r\n  templateUrl: './facture-form.component.html',\r\n  styleUrls: ['./facture-form.component.css']\r\n})\r\nexport class FactureFormComponent {\r\n  factureForm: FormGroup;\r\n  suggestedDateEcheance: string = '';\r\n\r\n\r\n  constructor(\r\n    private restService: RestService, \r\n    private router: Router,\r\n    private serviceML: ServiceML,\r\n  ) {\r\n    this.factureForm = new FormGroup({\r\n      dateecheance: new FormControl('', [Validators.required]),\r\n      dateemission: new FormControl('', [Validators.required]),\r\n      etatFacture: new FormControl('ATTENTE', [Validators.required]), // Default to 'ATTENTE'\r\n      montant: new FormControl('', [Validators.required, Validators.min(1)]),\r\n      number: new FormControl('')\r\n    });\r\n\r\n    this.factureForm.get('dateemission')?.valueChanges.subscribe(date => {\r\n      this.tryPredictEcheance();\r\n    });\r\n    \r\n    this.factureForm.get('montant')?.valueChanges.subscribe(montant => {\r\n      this.tryPredictEcheance();\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n    if (this.factureForm.valid) {\r\n      const factureData: Facture = this.factureForm.value;\r\n  \r\n      factureData.dateecheance = factureData.dateecheance.split('T')[0]; \r\n      factureData.dateemission = factureData.dateemission.split('T')[0]; \r\n  \r\n      this.restService.ajouterFacture({ body: factureData }).subscribe(\r\n        (response) => {\r\n          console.log('Facture added successfully:', response);\r\n          this.router.navigate(['/facture']); \r\n        },\r\n        (error) => {\r\n          console.error('Error adding facture:', error);\r\n        }\r\n      );\r\n    } else {\r\n      console.log('Form is invalid');\r\n    }\r\n  }\r\n\r\n  tryPredictEcheance(): void {\r\n    const dateEmission = this.factureForm.get('dateemission')?.value;\r\n    const montant = this.factureForm.get('montant')?.value;\r\n  \r\n    if (dateEmission && montant > 0) {\r\n      this.serviceML.predictDateEcheance(montant, dateEmission).subscribe({\r\n        next: (predictedDate: string) => {\r\n          const dateRegex = /\\d{4}-\\d{2}-\\d{2}/;\r\n          const match = predictedDate.match(dateRegex);\r\n          if (match) {\r\n            this.suggestedDateEcheance = match[0]; \r\n          } else {\r\n            this.suggestedDateEcheance = ''; \r\n          }\r\n        },\r\n        error: (err) => {\r\n          console.error('Erreur lors de la prédiction :', err);\r\n          this.suggestedDateEcheance = '';\r\n        }\r\n      });\r\n    } else {\r\n      this.suggestedDateEcheance = '';\r\n    }\r\n  }\r\n  \r\n  \r\n  \r\n  \r\n}\r\n","\r\n  <form [formGroup]=\"factureForm\" (ngSubmit)=\"onSubmit()\">\r\n\r\n    <div>\r\n      <label for=\"dateemission\">Date d'Émission</label>\r\n      <input id=\"dateemission\" formControlName=\"dateemission\" type=\"date\">\r\n    </div>\r\n\r\n    <div>\r\n      <label for=\"montant\">Montant</label>\r\n      <input id=\"montant\" formControlName=\"montant\" type=\"number\">\r\n    </div>\r\n    <div>\r\n      <label for=\"dateecheance\">Date d'Échéance</label>\r\n      <input id=\"dateecheance\" formControlName=\"dateecheance\" type=\"date\">\r\n      <div *ngIf=\"suggestedDateEcheance\" style=\"margin-top: 5px; color: #666;\">\r\n        💡 Suggestion : {{ suggestedDateEcheance }}\r\n        <button type=\"button\" (click)=\"factureForm.patchValue({ dateecheance: suggestedDateEcheance })\">Utiliser</button>\r\n      </div>\r\n    </div>\r\n    \r\n  \r\n    \r\n  \r\n    <div>\r\n      <label for=\"etatFacture\">État de la Facture</label>\r\n      <select id=\"etatFacture\" formControlName=\"etatFacture\">\r\n        <option value=\"PAYE\">PAYE</option>\r\n        <option value=\"ATTENTE\">ATTENTE</option>\r\n        <option value=\"RETARD\">RETARD</option>\r\n      </select>\r\n    </div>\r\n\r\n  \r\n    <div>\r\n      <label for=\"number\">Numéro</label>\r\n      <input id=\"number\" formControlName=\"number\" type=\"number\">\r\n    </div>\r\n  \r\n    <button type=\"submit\" [disabled]=\"factureForm.invalid\">Add Facture</button>\r\n  </form>\r\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}